<%= form_for(@definition) do |f| %>
  <% if @definition.errors.any? %>
    <div id="error_explanation">
      <h2><%= pluralize(@definition.errors.count, "error") %> prohibited this definition from being saved:</h2>

      <ul>
      <% @definition.errors.full_messages.each do |message| %>
        <li><%= message %></li>
      <% end %>
      </ul>
    </div>
  <% end %>

  <div class="field">
    <%= f.label :fmt %><br>
    <%= f.text_field :fmt %>
  </div>
  <div class="field">
    <%= f.label :constraints %><br>
    <% 10.times do |i| %>
      <%= text_field_tag(
            "constraint_#{i}_0".to_sym,
            @constraints[i] && @constraints[i][:args][0]
          ) %>
      <%= select_tag(
            "constraint_#{i}_type",
            options_for_select([
              ['equals', 0],
              ['less than', 1],
              ['greater than', 2],
              ['less than or equal to', 3],
              ['greater than or equal to', 4],
              ['is divisible by', 5],
              ['is factor of', 6],
              ['is decimal', 7]
            ])
          ) %>
      <%= text_field_tag(
            "constraint_#{i}_1".to_sym,
            @constraints[i] && @constraints[i][:args][1]
          ) %>
      <br />
    <% end %>
  </div>
  <div class="actions">
    <%= f.submit %>
  </div>
<% end %>
